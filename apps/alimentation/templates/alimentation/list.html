{% extends 'base.html' %}
{% load static %}

{% block title %}Donn√©es Alimentation - Bilan Carbone{% endblock %}

{% block content %}
<div class="container">
  <h1>üçΩÔ∏è Donn√©es Alimentation</h1>

  <div class="module-card">
    <div class="module-card__header">
      <h2 class="module-card__title">Synth√®se</h2>
    </div>
    <div class="module-card__body">
      <p><strong>{{ count }}</strong> donn√©e(s) enregistr√©e(s)</p>
      <p><strong>{{ total_co2|floatformat:2 }}</strong> kg CO‚ÇÇe</p>
      <p>‚âà {% widthratio total_co2 1000 1 %} tonne(s) CO‚ÇÇe</p>
    </div>
    <div class="module-card__actions">
      <a href="{% url 'alimentation:create' %}" class="btn btn--primary">‚ûï Nouvelle saisie</a>
    </div>
  </div>

  <h2 style="margin-top: 2rem;">D√©tails par service</h2>

  {% if entries %}
    <table class="table">
      <thead>
        <tr>
          <th>Ann√©e</th>
          <th>Service</th>
          <th>B≈ìuf/Veau</th>
          <th>Porc</th>
          <th>Poisson/Volaille</th>
          <th>V√©g√©tarien</th>
          <th>Pique-nique sans viande</th>
          <th>Pique-nique viande</th>
          <th>CO‚ÇÇ (kg)</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for e in entries %}
          <tr>
            <td>{{ e.year }}</td>
            <td>{{ e.service|default:"‚Äî" }}</td>
            <td>{{ e.beef_meals }}</td>
            <td>{{ e.pork_meals }}</td>
            <td>{{ e.poultry_fish_meals }}</td>
            <td>{{ e.vegetarian_meals }}</td>
            <td>{{ e.picnic_no_meat_meals }}</td>
            <td>{{ e.picnic_meat_meals }}</td>
            <td>{{ e.total_co2_kg|floatformat:2 }}</td>
            <td>{{ e.created_at|date:"d/m/Y" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Commencez par saisir vos premi√®res donn√©es alimentation.</p>
    <a href="{% url 'alimentation:create' %}" class="btn btn--primary">
      ‚ûï Cr√©er ma premi√®re saisie
    </a>
  {% endif %}
</div>
{% endblock %}
